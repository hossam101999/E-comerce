<div class="login-background">
  <div class="login-container">
    <img src="loogo.png" alt="ITIANS Electronics Logo" class="logo" />

    <form [formGroup]="resetPasswordForm" (ngSubmit)="onSubmit()">
      <h2 class="login-title">Reset Your Password</h2>

      <div class="mb-3">
        <input
          id="resetToken"
          formControlName="resetToken"
          name="resetToken"
          type="text"
          class="form-control"
          placeholder="Enter your reset token"
          [ngClass]="{
            'is-invalid':
              resetToken?.invalid && (resetToken?.dirty || resetToken?.touched)
          }"
        />
        <div
          *ngIf="
            resetToken?.invalid && (resetToken?.dirty || resetToken?.touched)
          "
          class="invalid-feedback"
        >
          <small *ngIf="resetToken?.errors?.['required']">
            Reset token is required.
          </small>
        </div>
      </div>

      <div class="mb-3">
        <input
          id="newPassword"
          formControlName="newPassword"
          name="newPassword"
          type="password"
          class="form-control"
          placeholder="Enter new password"
          [ngClass]="{
            'is-invalid':
              newPassword?.invalid &&
              (newPassword?.dirty || newPassword?.touched)
          }"
        />
        <div
          *ngIf="
            newPassword?.invalid && (newPassword?.dirty || newPassword?.touched)
          "
          class="invalid-feedback"
        >
          <small *ngIf="newPassword?.errors?.['required']">
            New password is required.
          </small>
          <small *ngIf="newPassword?.errors?.['minlength']">
            Password must be at least 8 characters.
          </small>
          <small *ngIf="newPassword?.errors?.['pattern']">
            Password must contain uppercase, lowercase, number, and special
            character.
          </small>
        </div>
      </div>

      <div class="mb-3">
        <input
          id="confirmPassword"
          formControlName="confirmPassword"
          name="confirmPassword"
          type="password"
          class="form-control"
          placeholder="Confirm new password"
          [ngClass]="{
            'is-invalid':
              confirmPassword?.invalid &&
              (confirmPassword?.dirty || confirmPassword?.touched)
          }"
        />
        <div
          *ngIf="
            confirmPassword?.invalid &&
            (confirmPassword?.dirty || confirmPassword?.touched)
          "
          class="invalid-feedback"
        >
          <small *ngIf="confirmPassword?.errors?.['required']">
            Please confirm your new password.
          </small>
          <small *ngIf="confirmPassword?.errors?.['mustMatch']">
            Passwords do not match.
          </small>
        </div>
      </div>

      <div *ngIf="errorMessage" class="error-message">
        {{ errorMessage }}
      </div>

      <div *ngIf="successMessage" class="success-message">
        {{ successMessage }}
      </div>

      <button
        type="submit"
        class="btn btn-primary btn-block login-button w-100"
        [disabled]="resetPasswordForm.invalid || isLoading"
      >
        Reset Password
      </button>

      <div *ngIf="isLoading" class="loader">
        <div class="spinner"></div>
        <p>Loading...</p>
      </div>
    </form>
  </div>
</div>
